<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quizzes - Unolingo</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>

<body class="sidebar-layout">
  <div class="sidebar">
    <div class="logo">Unolingo</div>
    <a href="homepage.html" class="nav-button">ğŸ  Home</a>
    <a href="quizzes.html" class="nav-button">â“ Quizzes</a>
    <a href="level-test.html" class="nav-button">â™œ Test your level</a>
    <a href="videos.html" class="nav-button">ğŸ¥ Videos</a>
    <a href="books.html" class="nav-button">ğŸ“– Books</a>
    <a href="translator.html" class="nav-button">ğŸŒ Translator</a>
    <a href="profile.html" class="nav-button">âš”ï¸ Profile</a>
    <a href="settings.html" class="nav-button">ğŸª¶ Settings</a>
  </div>

  <main class="container">
    <h2>Practice Quizzes</h2>
    <div class="grid">
      <div class="card">
        <h3>Peddler</h3>
        <p>5 questions Â· 3 mins</p>
        <p class="difficulty">Easy</p>
        <button class="btn" data-action="start-grammar">Start Quiz</button>
      </div>
      <div class="card">
        <h3>Rogue</h3>
        <p>8 questions Â· 5 mins</p>
        <p class="difficulty">Intermediate</p>
        <button class="btn" data-action="start-vocabulary">Start Quiz</button>
      </div>
      <div class="card">
        <h3>Knight</h3>
        <p>10 questions Â· 8 mins</p>
        <p class="difficulty">Hard</p>
        <button class="btn" data-action="start-advanced">Start Quiz</button>
      </div>
      <div class="card">
        <h3>Honored Warrior</h3>
        <p>15 questions Â· 10 mins</p>
        <p class="difficulty">Insane</p>
        <button class="btn" data-action="start-business">Start Quiz</button>
      </div>
    </div>
  </main>

  <script src="app.js"></script>
  <script>
    // Quiz Questions Database
    const quizDatabase = {
      grammar: {
        title: "Peddler",
        questions: [
          {
            text: "Choose the correct article: 'I saw _____ elephant at the zoo.'",
            options: ["a", "an", "the", "no article"],
            answer: 1,
            explanation: "We use 'an' before words that start with a vowel sound."
          },
          {
            text: "What is the plural of 'child'?",
            options: ["childs", "children", "childes", "childrens"],
            answer: 1,
            explanation: "The plural of 'child' is 'children' - an irregular plural form."
          },
          {
            text: "Choose the correct verb form: 'She _____ to school every day.'",
            options: ["go", "goes", "going", "gone"],
            answer: 1,
            explanation: "With third person singular (she), we add 's' to the verb."
          },
          {
            text: "Which sentence is correct?",
            options: [
              "I am taller than him.",
              "I am taller than he.",
              "I am more taller than him.",
              "I am tall than him."
            ],
            answer: 0,
            explanation: "In comparisons, we use 'than' + object pronoun (him)."
          },
          {
            text: "What is the past tense of 'eat'?",
            options: ["eated", "eating", "ate", "ated"],
            answer: 2,
            explanation: "The past tense of 'eat' is 'ate' - an irregular verb."
          }
        ]
      },
      vocabulary: {
        title: "Rogue",
        questions: [
          {
            text: "What does 'enormous' mean?",
            options: ["Very small", "Very large", "Very fast", "Very slow"],
            answer: 1,
            explanation: "Enormous means very large in size or amount."
          },
          {
            text: "Choose the correct meaning of 'annual':",
            options: ["Often", "Long", "Routine", "Every year"],
            answer: 3,
            explanation: "Annual means yearly or occurring every year. So if something is annual, it happens every year."
          },
          {
            text: "What does 'frustrated' mean?",
            options: ["Excited", "Confused", "Feeling annoyed", "Surprised"],
            answer: 2,
            explanation: "Frustrated means feeling annoyed or irritated"
          },
          {
            text: "Choose the correct word: 'The stronghold is _____ away.'",
            options: ["neary", "long", "far", "enourmous"],
            answer: 2,
            explanation: "'far' is the correct word for a long distance."
          },
          {
            text: "What does 'generous' mean?",
            options: ["Self-centred", "Giving freely", "Strict", "Kind"],
            answer: 1,
            explanation: "Generous means showing a readiness to give to others out of kindness."
          },
          {
            text: "Choose the correct antonym for 'brave':",
            options: ["Strong", "Courageous", "Fearful", "Boldly Spoken"],
            answer: 1,
            explanation: "Fearful is the antonym of brave, meaning lacking courage."
          },
          {
            text: "What does 'mysterious' mean?",
            options: ["Clear", "Obvious", "Unknown or hidden", "Simple"],
            answer: 2,
            explanation: "Mysterious means unknown or hidden."
          },
          {
            text: "Choose the correct word: 'She _____ her homework yesterday.'",
            options: ["completed", "completing", "complete", "completes"],
            answer: 0,
            explanation: "We need the past tense 'completed' for an action that happened yesterday."
          }
        ]
      },
      advanced: {
        title: "Knight",
        questions: [
          {
            text: "Which sentence uses the subjunctive mood correctly?",
            options: [
              "I suggest that he goes to the doctor.",
              "I suggest that he go to the doctor.",
              "I suggest that he went to the doctor.",
              "I suggest that he will go to the doctor."
            ],
            answer: 1,
            explanation: "The subjunctive mood uses the base form of the verb after 'suggest that'."
          },
          {
            text: "What does 'ubiquitous' mean?",
            options: ["Rare", "Present everywhere", "Expensive", "Difficult"],
            answer: 1,
            explanation: "Ubiquitous means present, appearing, or found everywhere."
          },
          {
            text: "Choose the correct conditional: 'If I _____ you, I would accept the offer.'",
            options: ["am", "was", "were", "will be"],
            answer: 2,
            explanation: "In hypothetical conditions, we use 'were' for all persons with 'if I were'."
          },
          {
            text: "What does 'ephemeral' mean?",
            options: ["Lasting forever", "Lasting for a very short time", "Very expensive", "Very large"],
            answer: 1,
            explanation: "Ephemeral means lasting for a very short time."
          },
          {
            text: "Which sentence is grammatically correct?",
            options: [
              "Neither John nor Mary are coming.",
              "Neither John nor Mary is coming.",
              "Neither John nor Mary were coming.",
              "Neither John nor Mary have come."
            ],
            answer: 1,
            explanation: "With 'neither...nor', the verb agrees with the subject closer to it (Mary is singular)."
          },
          {
            text: "What does 'serendipity' mean?",
            options: ["Bad luck", "The occurrence of happy accidents", "Hard work", "Planning ahead"],
            answer: 1,
            explanation: "Serendipity is the occurrence of events by chance in a happy way."
          },
          {
            text: "Choose the correct passive voice: 'They are building a new bridge.'",
            options: [
              "A new bridge is being built by them.",
              "A new bridge is built by them.",
              "A new bridge was being built by them.",
              "A new bridge will be built by them."
            ],
            answer: 0,
            explanation: "Present continuous passive: 'is being built' matches the present continuous active."
          },
          {
            text: "What does 'perspicacious' mean?",
            options: ["Confused", "Having keen insight", "Lazy", "Angry"],
            answer: 1,
            explanation: "Perspicacious means having a ready insight into and understanding of things."
          },
          {
            text: "Which sentence uses the gerund correctly?",
            options: [
              "I enjoy to read books.",
              "I enjoy reading books.",
              "I enjoy read books.",
              "I enjoy to reading books."
            ],
            answer: 1,
            explanation: "After 'enjoy', we use the gerund (reading), not the infinitive."
          },
          {
            text: "What does 'mellifluous' mean?",
            options: ["Harsh", "Sweet or musical", "Loud", "Quiet"],
            answer: 1,
            explanation: "Mellifluous means having a sweet, musical, pleasant sound."
          }
        ]
      },
      business: {
        title: "Honored Warrior",
        questions: [
          {
            text: "What does 'ROI' stand for?",
            options: ["Return on Investment", "Rate of Interest", "Revenue of Income", "Risk of Investment"],
            answer: 0,
            explanation: "ROI stands for Return on Investment, a performance measure."
          },
          {
            text: "Choose the correct term: 'We need to _____ our expenses.'",
            options: ["minimize", "maximize", "optimize", "minimize"],
            answer: 0,
            explanation: "Minimize means to reduce to the smallest possible amount."
          },
          {
            text: "What does 'synergy' mean?",
            options: ["Competition", "Cooperation", "The interaction of elements that produce a greater effect", "Conflict"],
            answer: 2,
            explanation: "Synergy is the interaction of elements that produce a greater effect together."
          },
          {
            text: "Choose the correct phrase: 'Let's _____ this effect.'",
            options: ["improve", "exacerbate", "biggen", "anteriolate"],
            answer: 1,
            explanation: "'Exacerbate' means to boost on increase something."
          },
          {
            text: "What does 'leverage' mean?",
            options: ["Avoid", "Use something to your advantage", "Ignore", "Reject"],
            answer: 1,
            explanation: "Leverage means to use something to your advantage."
          },
          {
            text: "Choose the correct email opening:",
            options: [
              "Hi John,",
              "Dear Mr. Smith,",
              "Hello there,",
              "To whom it may concern,",
              "Both A, B and C are correct"
            ],
            answer: 4,
            explanation: "'Hi John,' (informal) and 'Dear Mr. Smith,' (formal) as well as 'To whom it may concern,' (Client Formal) are appropriate depending on context."
          },
          {
            text: "What does 'stakeholder' mean?",
            options: ["A person with an interest in a business", "A wooden post", "A competitor", "A customer only"],
            answer: 0,
            explanation: "A stakeholder is a person with an interest or concern in a business."
          }
        ]
      }
    };

    // Quiz start function
    function startQuiz(quizType) {
      try {
        // Validate quiz type exists
        if (!quizDatabase || !quizDatabase[quizType]) {
          alert(`Quiz type "${quizType}" not found. Please try again.`);
          console.error('Quiz type not found:', quizType, 'Available types:', Object.keys(quizDatabase || {}));
          return;
        }

        const quizData = quizDatabase[quizType];

        // Validate quiz data structure
        if (!quizData || !quizData.questions || !Array.isArray(quizData.questions) || quizData.questions.length === 0) {
          alert('Invalid quiz data. Please try again.');
          console.error('Invalid quiz data for type:', quizType, quizData);
          return;
        }

        // Store the quiz type and questions in localStorage
        const quizDataString = JSON.stringify(quizData);
        console.log('Storing quiz data for type:', quizType, 'Data length:', quizDataString.length);

        localStorage.setItem('currentQuiz', quizDataString);
        localStorage.setItem('quizType', quizType);

        // Verify data was stored immediately (localStorage is synchronous)
        const storedData = localStorage.getItem('currentQuiz');
        if (!storedData) {
          console.error('Quiz data was not stored in localStorage');
          alert('Failed to store quiz data. Please check your browser settings.');
          return;
        }

        // Verify the stored data can be parsed
        try {
          const parsed = JSON.parse(storedData);
          if (!parsed.questions || !Array.isArray(parsed.questions) || parsed.questions.length === 0) {
            console.error('Stored quiz data is invalid:', parsed);
            alert('Invalid quiz data stored. Please try again.');
            localStorage.removeItem('currentQuiz');
            localStorage.removeItem('quizType');
            return;
          }
          console.log('Quiz data stored successfully. Questions:', parsed.questions.length);
        } catch (parseError) {
          console.error('Failed to parse stored quiz data:', parseError);
          alert('Stored quiz data is corrupted. Please try again.');
          localStorage.removeItem('currentQuiz');
          localStorage.removeItem('quizType');
          return;
        }

        // Redirect to quiz page
        console.log('Redirecting to quiz-taking.html');
        window.location.href = `quiz-taking.html?type=${quizType}`;
      } catch (error) {
        console.error('Error starting quiz:', error);
        alert('An error occurred while starting the quiz. Please try again.');
      }
    }

    // Event handlers for quiz buttons
    addEventListeners('[data-action="start-grammar"]', 'Grammar quiz button', () => startQuiz('grammar'));
    addEventListeners('[data-action="start-vocabulary"]', 'Vocabulary quiz button', () => startQuiz('vocabulary'));
    addEventListeners('[data-action="start-advanced"]', 'Advanced quiz button', () => startQuiz('advanced'));
    addEventListeners('[data-action="start-business"]', 'Business quiz button', () => startQuiz('business'));
  </script>
</body>

</html>